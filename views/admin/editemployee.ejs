<%- include('common/header') %>
    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="container-fluid">
<form action="/admin/employees/update-employee/<%= employee._id %>" method="POST" style="background: #fff; border-radius: 16px; box-shadow: 0 6px 24px rgba(31,38,135,0.13); padding: 32px 24px; max-width: 700px; margin:40px auto;">
  <h2 style="text-align:center; color:#6c63ff; font-weight:700; margin-bottom:28px;">Update Employee</h2>
  
  <div style="margin-bottom:18px;">
    <label style="font-weight:500; color:#223; display:block; margin-bottom:6px;">Name</label>
    <input type="text" name="name" value="<%= employee.name %>" required
      style="width:100%; border-radius:8px; border:1px solid #ccc; padding:10px 12px; font-size:1rem;">
  </div>
  
  <div style="margin-bottom:18px;">
    <label style="font-weight:500; color:#223; display:block; margin-bottom:6px;">Email</label>
    <input type="email" name="email" value="<%= employee.email %>" required
      style="width:100%; border-radius:8px; border:1px solid #ccc; padding:10px 12px; font-size:1rem;">
  </div>
  
  <div style="margin-bottom:18px;">
    <label style="font-weight:500; color:#223; display:block; margin-bottom:6px;">Mobile</label>
    <input type="text" name="mobile" value="<%= employee.mobile %>" required
      style="width:100%; border-radius:8px; border:1px solid #ccc; padding:10px 12px; font-size:1rem;">
  </div>
  
  <div style="margin-bottom:18px;">
    <label style="font-weight:500; color:#223; display:block; margin-bottom:6px;">Role</label>
    <select name="role"
      style="width:100%; border-radius:8px; border:1px solid #ccc; padding:10px 12px; font-size:1rem;">
      <option value="employee" <%= employee.role === "employee" ? "selected" : "" %>>Employee</option>
      <option value="admin" <%= employee.role === "admin" ? "selected" : "" %>>Admin</option>
    </select>
  </div>
  
  <div style="margin-bottom:18px;">
    <label style="font-weight:500; color:#223; display:block; margin-bottom:6px;">Password <span style="font-weight:400; color:#888; font-size:0.95em;">(leave blank if unchanged)</span></label>
    <input type="password" name="password"
      style="width:100%; border-radius:8px; border:1px solid #ccc; padding:10px 12px; font-size:1rem;">
  </div>
  
  <div style="margin-bottom:22px;">
    <label style="font-weight:500; color:#223; display:block; margin-bottom:8px;">Access Permissions</label>
    <div style="display: flex; flex-wrap: wrap; gap:10px 18px;">
      <% const permissions = [
         "Manage_Users",
            "Manage_Roles",
            "Manage_Admin",
            "Manage_CallLogs",
            "Manage_SupportTickets",
            "Manage_Reports",
            "Manage_Settings",
            "Manage_Ads_Top",
            "Manage_Ads_Bottom",
            "Manage_Ads_Side",
            "Manage_Ads_Sponsored",
            "Manage_Jobs",
            "Manage_Blogs",
            "Manage_Analytics",
            "Manage_MandiRates",
            "Manage_PushNotifications",
            "Manage_Plans",
            "Manage_Payments",
            "Manage_CompanyList",
            "Manage_Commodities",
            "Manage_Mandis",
            "Manage_Categories"
      ]; %>
      <% permissions.forEach(p => { %>
        <label style="display: flex; align-items: center; gap:6px; font-size:0.98em; background:#f7f7fc; border-radius:6px; padding:4px 10px;">
          <input type="checkbox" name="access" value="<%= p %>" 
            <%= employee.access.includes(p) ? "checked" : "" %>
            style="accent-color:#6c63ff; margin-right:3px;">
          <span><%= p.replace(/_/g, ' ') %></span>
        </label>
      <% }) %>
    </div>
  </div>
  
  <div style="display:flex; gap:12px; justify-content: flex-end;">
    <button type="submit"
      style="border:none; border-radius:8px; background:linear-gradient(90deg,#6c63ff 50%,#48c6ef 100%); color:#fff; font-weight:600; padding:10px 32px; font-size:1rem; cursor:pointer;">
      Update Employee
    </button>
    <a href="/admin/employees"
      style="background:#eee; color:#333; border-radius:8px; padding:10px 32px; text-decoration:none; font-weight:500; border:1px solid #ddd;">
      Cancel
    </a>
  </div>
</form>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js Initialization -->
    <script>
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        const sidebarToggle = document.getElementById('sidebarToggle');

        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('collapsed');
        });
    </script>
</body>
</html>